@using HabitAqui.Data
@{
    ViewData["Title"] = "Nome da habitação";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="/css/detalhes-habitacao.css"/>

<div class="text-left">
    <h1 class="display-4">@Model.DetalhesHabitacao.Nome</h1>
</div>
<div class="galeria-container">
    <div class="outside-flex">
        @{
            var a = 0;
            foreach (var imagem in Model.Imagens)
            {
                if (a == 0)
                {
                    <div class="flex-left col-6 mx-2">
                        <img alt="imagem da casa" src="/imgs/habitacoes/@Model.Id/@imagem.Path">
                    </div>
                }

                ++a;
            }
        }
        <div class="flex-right col-6 mx-2">
            <div class="inner-flex-right">
                @{
                    var i = 0;
                    foreach (var imagem in Model.Imagens)
                    {
                        if (i != 0)
                        {
                            <img alt="imagem da casa" src="/imgs/habitacoes/@Model.Id/@imagem.Path">
                        }

                        ++i;
                    }
                }
            </div>
        </div>
    </div>
</div>

<div class="avaliacoes-container">
    <h2>Avaliações</h2>
    @foreach (var avaliacao in Model.Avaliacoes)
    {
        <div class="avaliacao">
            <p>
                <strong>Nota:</strong> @avaliacao.Nota
            </p>
            <p>
                <strong>Comentário:</strong> @avaliacao.Comentario
            </p>
            <p>
                <strong>Por:</strong> @avaliacao.Cliente.Nome
            </p>
        </div>
    }

    @if (User.Identity.IsAuthenticated)
    {
        <div>
            <a asp-action="Avaliar" asp-route-id="@Model.Id">Deixar uma avaliação</a>
        </div>
    }
</div>

@if (User.IsInRole(Roles.Funcionario.ToString()) || User.IsInRole(Roles.Gestor.ToString()))
{
    <div>
        <a asp-action="Edit" asp-route-id="@Model?.Id">Edit</a> |
        <a asp-action="Index">Back to List</a>
    </div>
}